window.__require=function i(n,t,e){function a(r,s){if(!t[r]){if(!n[r]){var c=r.split("/");if(c=c[c.length-1],!n[c]){var g="function"==typeof __require&&__require;if(!s&&g)return g(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=t[r]={exports:{}};n[r][0].call(l.exports,function(i){return a(n[r][1][i]||i)},l,l.exports,i,n,t,e)}return t[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<e.length;r++)a(e[r]);return a}({Kiss918BigWinAnimEnum:[function(i,n,t){"use strict";cc._RF.push(n,"177a2EqAmJM2ZJG8B5W74Z/","Kiss918BigWinAnimEnum"),Object.defineProperty(t,"__esModule",{value:!0}),t.BigWinType=void 0,function(i){i[i.None=0]="None",i[i.BigWin=1]="BigWin",i[i.MegaBigWin=2]="MegaBigWin",i[i.SuperBigWin=3]="SuperBigWin",i[i.UltraBigWin=4]="UltraBigWin",i[i.UltraMegaBigWin=5]="UltraMegaBigWin"}(t.BigWinType||(t.BigWinType={})),cc._RF.pop()},{}],Kiss918BigWinAnimModel:[function(i,n,t){"use strict";cc._RF.push(n,"bef928AwA9AnoMWqy2F0rra","Kiss918BigWinAnimModel"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.gameResult=null}},cc._RF.pop()},{}],Kiss918BigWinAnimModule:[function(i,n,t){"use strict";cc._RF.push(n,"760cdGIMc9Aa5DuV5/jDO/1","Kiss918BigWinAnimModule");var e=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0});const a=i("./Kiss918BigWinAnimEnum"),o=e(i("./Kiss918BigWinAnimModel"));class r{static init(){this.data=new o.default}static getBigWinType(i,n){if(0===i)return a.BigWinType.None;const t=i/n;return t>=15&&t<50?a.BigWinType.BigWin:t>=50&&t<100?a.BigWinType.MegaBigWin:t>=100&&t<150?a.BigWinType.SuperBigWin:t>=150&&t<200?a.BigWinType.UltraBigWin:t>=200?a.BigWinType.UltraMegaBigWin:a.BigWinType.None}}t.default=r,r.data=null,cc._RF.pop()},{"./Kiss918BigWinAnimEnum":"Kiss918BigWinAnimEnum","./Kiss918BigWinAnimModel":"Kiss918BigWinAnimModel"}],Kiss918BigWinAnimPrefab:[function(i,n,t){"use strict";cc._RF.push(n,"2f344CZAeNOWJ9gdm9VRpND","Kiss918BigWinAnimPrefab");var e=this&&this.__decorate||function(i,n,t,e){var a,o=arguments.length,r=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,n,t,e);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(r=(o<3?a(r):o>3?a(n,t,r):a(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r},a=this&&this.__awaiter||function(i,n,t,e){return new(t||(t=Promise))(function(a,o){function r(i){try{c(e.next(i))}catch(n){o(n)}}function s(i){try{c(e.throw(i))}catch(n){o(n)}}function c(i){var n;i.done?a(i.value):(n=i.value,n instanceof t?n:new t(function(i){i(n)})).then(r,s)}c((e=e.apply(i,n||[])).next())})},o=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0});const r=i("../../../../scripts/framework/gg"),s=i("../../../../scripts/HelperTools"),c=o(i("../../../../scripts/manager/AudioManager")),g=o(i("../../../../scripts/manager/EventQueueManager")),l=i("./Kiss918BigWinAnimEnum"),m=o(i("./Kiss918BigWinAnimModule")),p=o(i("./Kiss918FireworkPrefab")),{ccclass:u,property:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.bigWinBackground=null,this.bigWinGroup=null,this.bigWinDecoration01=null,this.bigWinDecoration02=null,this.bigWinLight=null,this.bigWinGraphicText=null,this.coinRainPrefab01=null,this.coinRainPrefab02=null,this.coinRainPrefab03=null,this.coinRainPrefab04=null,this.main={bigWinGroup:null,bigWinBackground:null,bigWinGraphicTextAnim:null,bigWinDecorationAnim01:null,bigWinDecorationAnim02:null,bigWinLightAnim:null,coinRainPrefab01:null,coinRainPrefab02:null,coinRainPrefab03:null,coinRainPrefab04:null,animationConfig:null}}onLoad(){this.setupAnimationConfig(),this.cachePropertyNode(),this.cacheAnimationNode(),this.registerEvent()}start(){return a(this,void 0,void 0,function*(){yield this.loadBigWinAnimAssets(),this.setupBigWinAnimModule(),yield s.Delay(3),this.showBigWinAnimation(100,1)})}showBigWinAnimation(i,n){return a(this,void 0,void 0,function*(){const t=m.default.getBigWinType(i,n);let e=0;if(t===l.BigWinType.None)return;switch(this.main.bigWinGroup.active=!0,yield s.Delay(.5),this.main.coinRainPrefab01.active=!0,this.main.coinRainPrefab02.active=!0,this.main.coinRainPrefab03.active=!0,this.main.coinRainPrefab04.active=!0,this.main.bigWinDecorationAnim01.node.active=!0,this.main.bigWinDecorationAnim02.node.active=!0,cc.tween(this.main.bigWinDecorationAnim01.node).to(0,{scaleX:5,scaleY:5}).to(.3,{scaleX:2,scaleY:2}).call(()=>{this.main.bigWinDecorationAnim01.play("alarm-warn")}).start(),cc.tween(this.main.bigWinDecorationAnim02.node).to(0,{scaleX:5,scaleY:5}).to(.3,{scaleX:2,scaleY:2}).call(()=>{this.main.bigWinDecorationAnim02.play("alarm-warn")}).start(),t){case l.BigWinType.BigWin:this.main.bigWinGraphicTextAnim.play("bigwin"),this.main.bigWinLightAnim.play("bigwin-whitetext"),c.default.getInstance().play("Sfx_BigWin"),e=this.main.animationConfig.delayTime.BigWin;break;case l.BigWinType.MegaBigWin:this.main.bigWinGraphicTextAnim.play("megawin"),this.main.bigWinLightAnim.play("megawin-whitetext"),c.default.getInstance().play("Sfx_MegaBigWin"),e=this.main.animationConfig.delayTime.MegaBigWin;break;case l.BigWinType.SuperBigWin:this.main.bigWinGraphicTextAnim.play("superwin"),this.main.bigWinLightAnim.play("superwin-whitetext"),c.default.getInstance().play("Sfx_SuperBigWin"),e=this.main.animationConfig.delayTime.SuperBigWin;break;case l.BigWinType.UltraBigWin:this.main.bigWinGraphicTextAnim.play("ultrawin"),this.main.bigWinLightAnim.play("ultrawin-whitetext"),c.default.getInstance().play("Sfx_UltraBigWin"),e=this.main.animationConfig.delayTime.UltraBigWin;break;case l.BigWinType.UltraMegaBigWin:this.main.bigWinGraphicTextAnim.play("ultramegawin"),this.main.bigWinLightAnim.play("ultramegawin-whitetext"),c.default.getInstance().play("Sfx_UltraMegaBigWin"),e=this.main.animationConfig.delayTime.UltraMegaBigWin}g.default.getInstance().addEvent("SpaceOrSpinButton","ShowBigWinAnim",()=>{r.gg.eventManager.emit("BigWinAnim.OnSpaceOrSpinButtonDown")}),r.gg.eventManager.emit("HUDPrefab.OnSpinButtonUpdate","disable"),yield s.Delay(5),r.gg.eventManager.emit("HUDPrefab.OnSpinButtonUpdate","enable");const a=e-5;yield s.SkippableDelay(cc.misc.clampf(a,0,a),"BigWinAnim.OnSpaceOrSpinButtonDown"),this.stopAllAnimation(),this.stopAllSoundEffect(),this.main.bigWinGroup.active=!1,c.default.getInstance().play("Sfx_bwinreact",!0),g.default.getInstance().removeEventById("SpaceOrSpinButton","ShowBigWinAnim")})}stopAllAnimation(){this.main.bigWinGraphicTextAnim.stop(),this.main.bigWinDecorationAnim01.stop(),this.main.bigWinDecorationAnim02.stop(),this.main.bigWinLightAnim.stop(),this.main.bigWinDecorationAnim01.node.active=!1,this.main.bigWinDecorationAnim02.node.active=!1}stopAllSoundEffect(){c.default.getInstance().stop(["Sfx_BigWin","Sfx_MegaBigWin","Sfx_SuperBigWin","Sfx_UltraBigWin","Sfx_UltraMegaBigWin"])}setupBigWinAnimModule(){m.default.init()}registerEvent(){r.gg.eventManager.on("SlotEnginePrefab.OnSpinStarted",this.onSpinStartedOrByReel,this),r.gg.eventManager.on("SlotEnginePrefab.OnSpinStartedByReel",this.onSpinStartedOrByReel,this)}setupAnimationConfig(){this.main.animationConfig={delayTime:{BigWin:6,MegaBigWin:9,SuperBigWin:7,UltraBigWin:11,UltraMegaBigWin:14}}}cachePropertyNode(){this.main.bigWinGroup=this.bigWinGroup,this.main.coinRainPrefab01=this.coinRainPrefab01,this.main.coinRainPrefab02=this.coinRainPrefab02,this.main.coinRainPrefab03=this.coinRainPrefab03,this.main.coinRainPrefab04=this.coinRainPrefab04}cacheAnimationNode(){this.main.bigWinBackground=this.bigWinBackground,this.main.bigWinGraphicTextAnim=this.bigWinGraphicText.getComponent(cc.Animation),this.main.bigWinDecorationAnim01=this.bigWinDecoration01.getComponent(cc.Animation),this.main.bigWinDecorationAnim02=this.bigWinDecoration02.getComponent(cc.Animation),this.main.bigWinLightAnim=this.bigWinLight.getComponent(cc.Animation)}onSpinStartedOrByReel(){r.gg.eventManager.emit("BigWinAnim.OnSpaceOrSpinButtonDown"),c.default.getInstance().stop("Sfx_bwinreact")}loadBigWinAnimAssets(){return a(this,void 0,void 0,function*(){return new Promise(i=>{cc.assetManager.loadBundle("kiss918-bigwin",(n,t)=>{if(n)return console.error(n);const e=s.AsyncTask(i=>a(this,void 0,void 0,function*(){t.load(["animation/bigwin","animation/megawin","animation/superwin","animation/ultrawin","animation/ultramegawin"],cc.AnimationClip,(i,n)=>{if(n.length>0)for(const t of n)this.main.bigWinGraphicTextAnim.addClip(t)}),t.load(["animation/bigwin-firework-blue","animation/bigwin-firework-green","animation/bigwin-firework-red","animation/bigwin-firework-white"],cc.AnimationClip,(i,n)=>{this.main.coinRainPrefab01.getComponent(cc.Animation).addClip(n[0]),this.main.coinRainPrefab01.getComponent(p.default).particleAnimationName=n[0].name,this.main.coinRainPrefab02.getComponent(cc.Animation).addClip(n[1]),this.main.coinRainPrefab02.getComponent(p.default).particleAnimationName=n[1].name,this.main.coinRainPrefab03.getComponent(cc.Animation).addClip(n[2]),this.main.coinRainPrefab03.getComponent(p.default).particleAnimationName=n[2].name,this.main.coinRainPrefab04.getComponent(cc.Animation).addClip(n[3]),this.main.coinRainPrefab04.getComponent(p.default).particleAnimationName=n[3].name}),t.load(["animation/bigwin-whitetext","animation/megawin-whitetext","animation/superwin-whitetext","animation/ultramegawin-whitetext","animation/ultrawin-whitetext"],cc.AnimationClip,(i,n)=>{if(n.length>0)for(const t of n)this.main.bigWinLightAnim.addClip(t)}),t.load("animation/alarm-warn",cc.AnimationClip,(n,t)=>{this.main.bigWinDecorationAnim01.addClip(t),this.main.bigWinDecorationAnim02.addClip(t),this.main.bigWinDecorationAnim01.node.active=!1,this.main.bigWinDecorationAnim02.node.active=!1,i()})}));Promise.all([e]).then(()=>{i()})})})})}};e([h(cc.Node)],d.prototype,"bigWinBackground",void 0),e([h(cc.Node)],d.prototype,"bigWinGroup",void 0),e([h(cc.Node)],d.prototype,"bigWinDecoration01",void 0),e([h(cc.Node)],d.prototype,"bigWinDecoration02",void 0),e([h(cc.Node)],d.prototype,"bigWinLight",void 0),e([h(cc.Node)],d.prototype,"bigWinGraphicText",void 0),e([h(cc.Node)],d.prototype,"coinRainPrefab01",void 0),e([h(cc.Node)],d.prototype,"coinRainPrefab02",void 0),e([h(cc.Node)],d.prototype,"coinRainPrefab03",void 0),e([h(cc.Node)],d.prototype,"coinRainPrefab04",void 0),d=e([u],d),t.default=d,cc._RF.pop()},{"../../../../scripts/HelperTools":void 0,"../../../../scripts/framework/gg":void 0,"../../../../scripts/manager/AudioManager":void 0,"../../../../scripts/manager/EventQueueManager":void 0,"./Kiss918BigWinAnimEnum":"Kiss918BigWinAnimEnum","./Kiss918BigWinAnimModule":"Kiss918BigWinAnimModule","./Kiss918FireworkPrefab":"Kiss918FireworkPrefab"}],Kiss918FireworkPrefab:[function(i,n,t){"use strict";cc._RF.push(n,"ba727WhiSZGhpd9ZwSkSzaS","Kiss918FireworkPrefab");var e=this&&this.__decorate||function(i,n,t,e){var a,o=arguments.length,r=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,n,t,e);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(r=(o<3?a(r):o>3?a(n,t,r):a(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});const{ccclass:a,property:o}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.particleAnimationName="",this.main={particleSystem:null,particleAnimation:null}}onLoad(){this.cacheRainPorperty()}start(){}onEnable(){this.playSpreadAnimation()}onDisable(){this.stopSpreadAnimation()}cacheRainPorperty(){this.main.particleSystem=this.node.getComponent(cc.ParticleSystem),this.main.particleAnimation=this.node.getComponent(cc.Animation)}playSpreadAnimation(){this.particleAnimationName&&this.main.particleAnimation.play(this.particleAnimationName)}stopSpreadAnimation(){this.particleAnimationName&&this.main.particleAnimation.stop(),this.main.particleSystem.resetSystem()}};e([o],r.prototype,"particleAnimationName",void 0),r=e([a],r),t.default=r,cc._RF.pop()},{}]},{},["Kiss918BigWinAnimEnum","Kiss918BigWinAnimModel","Kiss918BigWinAnimModule","Kiss918BigWinAnimPrefab","Kiss918FireworkPrefab"]);