window.__require=function i(n,e,t){function a(r,s){if(!e[r]){if(!n[r]){var c=r.split("/"),g=c,l=r;if(g=g[g.length-1],c.length>1&&(window.cachePath[g]=r),!n[g]){var p="function"==typeof __require&&__require;if(!s&&p)return p(g,!0);if(o)return o(g,!0);if("object"==typeof __quick_compile_project__&&__quick_compile_project__){var m=window.cachePath[g];m&&(l=m);for(var u=l.split("/"),d="",h=u.length;h>0;)u[h]&&".."!=u[h]&&(d="/"+u[h]+d),h--;return g="./assets"+d,__quick_compile_project__.require(g,"preview-scripts/__qc_index__.js")}throw new Error("Cannot find module '"+r+"'")}r=g}var W=e[r]={exports:{}};n[r][0].call(W.exports,function(i){return a(n[r][1][i]||i)},W,W.exports,i,n,e,t)}return e[r].exports}window.cachePath={};for(var o="function"==typeof __require&&__require,r=0;r<t.length;r++)a(t[r]);return a}({X500BigWinAnimEnum:[function(i,n,e){"use strict";cc._RF.push(n,"6f9fcRS1MdAUIyfWgXbXZWo","X500BigWinAnimEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.BigWinType=void 0,function(i){i[i.None=0]="None",i[i.BigWin=1]="BigWin",i[i.MegaBigWin=2]="MegaBigWin",i[i.SuperBigWin=3]="SuperBigWin",i[i.UltraBigWin=4]="UltraBigWin",i[i.UltraMegaBigWin=5]="UltraMegaBigWin"}(e.BigWinType||(e.BigWinType={})),cc._RF.pop()},{}],X500BigWinAnimModel:[function(i,n,e){"use strict";cc._RF.push(n,"4263aIAQfpNZZ0ADX9aTNpe","X500BigWinAnimModel"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.gameResult=null}},cc._RF.pop()},{}],X500BigWinAnimModule:[function(i,n,e){"use strict";cc._RF.push(n,"921e6uDIptB7ZXZXkYTYFE5","X500BigWinAnimModule");var t=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});const a=i("./X500BigWinAnimEnum"),o=t(i("./X500BigWinAnimModel"));class r{static init(){this.data=new o.default}static getBigWinType(i,n){if(0===i)return a.BigWinType.None;const e=i/n;return e>=15&&e<50?a.BigWinType.BigWin:e>=50&&e<100?a.BigWinType.MegaBigWin:e>=100&&e<150?a.BigWinType.SuperBigWin:e>=150&&e<200?a.BigWinType.UltraBigWin:e>=200?a.BigWinType.UltraMegaBigWin:a.BigWinType.None}static getBigWinOpen(){return r.data.bigWinOpenStatus}static setBigWinOpen(i){r.data.bigWinOpenStatus=i}}e.default=r,r.data=null,cc._RF.pop()},{"./X500BigWinAnimEnum":"X500BigWinAnimEnum","./X500BigWinAnimModel":"X500BigWinAnimModel"}],X500BigWinAnimPrefab:[function(i,n,e){"use strict";cc._RF.push(n,"bcca6AEwWVBxJgM3Gl2EjRu","X500BigWinAnimPrefab");var t=this&&this.__decorate||function(i,n,e,t){var a,o=arguments.length,r=o<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,n,e,t);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(r=(o<3?a(r):o>3?a(n,e,r):a(n,e))||r);return o>3&&r&&Object.defineProperty(n,e,r),r},a=this&&this.__awaiter||function(i,n,e,t){return new(e||(e=Promise))(function(a,o){function r(i){try{c(t.next(i))}catch(n){o(n)}}function s(i){try{c(t.throw(i))}catch(n){o(n)}}function c(i){var n;i.done?a(i.value):(n=i.value,n instanceof e?n:new e(function(i){i(n)})).then(r,s)}c((t=t.apply(i,n||[])).next())})},o=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});const r=i("../../../../main-bundle/scripts/configs/PanelConfigs"),s=i("../../../../scripts/framework/gg"),c=i("../../../../scripts/GlobalData"),g=i("../../../../scripts/HelperTools"),l=o(i("../../../../scripts/manager/AudioManager")),p=o(i("../../../../scripts/manager/EventQueueManager")),m=o(i("../../../../scripts/manager/GameSystemManager")),u=i("./X500BigWinAnimEnum"),d=o(i("./X500BigWinAnimModule")),{ccclass:h,property:W}=cc._decorator;let f=class extends cc.Component{constructor(){super(...arguments),this.bigWinBackground=null,this.bigWinGroup=null,this.bigWinDecoration=null,this.bigWinLight=null,this.bigWinGraphicText=null,this.coinRainPrefab01=null,this.main={bigWinGroup:null,bigWinBackground:null,bigWinGraphicTextAnim:null,bigWinDecorationAnim:null,bigWinLightAnim:null,coinRainPrefab01:null,animationConfig:null,isLoading:null},this.eventCallBack={onBigWinStart:()=>{},onBigWinClose:()=>{}},this.loadingResolve=null}get registerEventCallBack(){return this.eventCallBack}onLoad(){this.setupAnimationConfig(),this.cachePropertyNode(),this.cacheAnimationNode(),this.registerEvent(),this.setupBigWinAnimModule()}start(){return a(this,void 0,void 0,function*(){this.main.isLoading=!0,yield this.loadBigWinAnimAssets(),this.main.isLoading=!1,this.loadingResolve&&this.loadingResolve()})}checkBigWinCondition(i,n){return a(this,void 0,void 0,function*(){d.default.getBigWinType(i,n)!==u.BigWinType.None&&(c.GlobalData.flags.bigWinShowing=!0)})}showBigWinAnimation(i,n,e=5){return a(this,void 0,void 0,function*(){const t=d.default.getBigWinType(i,n);let o=0;if(t===u.BigWinType.None)return;switch(this.main.isLoading&&(s.gg.panelRouter.show({panel:r.PanelConfigs.loadingPanel,data:{playShowAnim:!0}}),yield g.AsyncTask(i=>a(this,void 0,void 0,function*(){this.loadingResolve=i})),s.gg.panelRouter.hide({panel:r.PanelConfigs.loadingPanel})),d.default.setBigWinOpen(!0),this.eventCallBack.onBigWinStart(),s.gg.eventManager.emit("HUDPrefab.OnSpinButtonUpdate","disable"),yield g.Delay(.5),this.main.bigWinGroup.active=!0,this.main.coinRainPrefab01.active=!0,this.main.bigWinDecorationAnim.play("BigWinDecorationAnimation"),this.main.bigWinLightAnim.play("BigWinLightAnim"),t){case u.BigWinType.BigWin:this.main.bigWinGraphicTextAnim.play("BigWinAnimation"),l.default.getInstance().play("Sfx_BigWin"),o=this.main.animationConfig.delayTime.BigWin;break;case u.BigWinType.MegaBigWin:this.main.bigWinGraphicTextAnim.play("MegaBigWinAnimation"),l.default.getInstance().play("Sfx_MegaBigWin"),o=this.main.animationConfig.delayTime.MegaBigWin;break;case u.BigWinType.SuperBigWin:this.main.bigWinGraphicTextAnim.play("SuperBigWinAnimation"),l.default.getInstance().play("Sfx_SuperBigWin"),o=this.main.animationConfig.delayTime.SuperBigWin;break;case u.BigWinType.UltraBigWin:this.main.bigWinGraphicTextAnim.play("UltraBigWinAnimation"),l.default.getInstance().play("Sfx_UltraBigWin"),o=this.main.animationConfig.delayTime.UltraBigWin;break;case u.BigWinType.UltraMegaBigWin:this.main.bigWinGraphicTextAnim.play("UltraMegaBigWinAnimation"),l.default.getInstance().play("Sfx_UltraMegaBigWin"),o=this.main.animationConfig.delayTime.UltraMegaBigWin}if(p.default.getInstance().addEvent("SpaceOrSpinButton","ShowBigWinAnim",()=>{s.gg.eventManager.emit("BigWinAnim.OnSpaceOrSpinButtonDown")}),yield g.SkippableDelay(e,"BigWinAnimPrefab.closeBigWin"),0==d.default.getBigWinOpen())return;s.gg.eventManager.emit("HUDPrefab.OnSpinButtonUpdate","enable");const c=o-5;yield g.SkippableDelay(cc.misc.clampf(c,0,c),"BigWinAnim.OnSpaceOrSpinButtonDown"),this.closeBigWin(),l.default.getInstance().play("Sfx_bwinreact",!0)})}closeBigWin(){this.eventCallBack.onBigWinClose(),this.stopAllAnimation(),this.stopAllSoundEffect(),this.main.bigWinGroup.active=!1,d.default.setBigWinOpen(!1),p.default.getInstance().removeEventById("SpaceOrSpinButton","ShowBigWinAnim")}stopAllAnimation(){this.main.bigWinGraphicTextAnim.stop(),this.main.bigWinDecorationAnim.stop(),this.main.bigWinLightAnim.stop()}stopAllSoundEffect(){l.default.getInstance().stop(["Sfx_bwinreact","Sfx_BigWin","Sfx_MegaBigWin","Sfx_SuperBigWin","Sfx_UltraBigWin","Sfx_UltraMegaBigWin"])}setupBigWinAnimModule(){d.default.init()}registerEvent(){s.gg.eventManager.on("SlotEnginePrefab.OnSpinStarted",this.onSpinStartedOrByReel,this),s.gg.eventManager.on("SlotEnginePrefab.OnSpinStartedByReel",this.onSpinStartedOrByReel,this),s.gg.eventManager.on("BigWinAnimPrefab.closeBigWin",this.closeBigWin,this),s.gg.eventManager.on("BigWinAnimPrefab.stopAllSoundEffect",this.stopAllSoundEffect,this)}setupAnimationConfig(){this.main.animationConfig={delayTime:{BigWin:6,MegaBigWin:9,SuperBigWin:7,UltraBigWin:11,UltraMegaBigWin:14}}}cachePropertyNode(){this.main.bigWinGroup=this.bigWinGroup,this.main.coinRainPrefab01=this.coinRainPrefab01}cacheAnimationNode(){this.main.bigWinBackground=this.bigWinBackground,this.main.bigWinGraphicTextAnim=this.bigWinGraphicText.getComponent(cc.Animation),this.main.bigWinDecorationAnim=this.bigWinDecoration.getComponent(cc.Animation),this.main.bigWinLightAnim=this.bigWinLight.getComponent(cc.Animation)}onSpinStartedOrByReel(){s.gg.eventManager.emit("BigWinAnim.OnSpaceOrSpinButtonDown"),c.GlobalData.flags.bigWinShowing=!1,this.stopAllSoundEffect()}loadBigWinAnimAssets(){return a(this,void 0,void 0,function*(){return new Promise(i=>{cc.assetManager.loadBundle("x500-bigwin",(n,e)=>{if(n)return console.error(n);const t=`textures/${m.default.getInstance().getLanguageCode()}`,o=g.AsyncTask(i=>a(this,void 0,void 0,function*(){e.loadDir("sounds",cc.AudioClip,(n,e)=>{l.default.getInstance().addAll(e),i()})})),r=g.AsyncTask(i=>a(this,void 0,void 0,function*(){e.loadDir("animations",cc.AnimationClip,()=>{e.load("animations/BigWinCoinsParticleAnim",cc.AnimationClip,(i,n)=>{this.main.coinRainPrefab01.getComponent(cc.Animation).addClip(n)}),e.load("animations/BigWinDecorationAnimation",cc.AnimationClip,(i,n)=>{this.main.bigWinDecorationAnim.addClip(n)}),e.load("animations/BigWinLightAnim",cc.AnimationClip,(i,n)=>{this.main.bigWinLightAnim.addClip(n)}),i()})})),s=g.AsyncTask(i=>a(this,void 0,void 0,function*(){e.loadDir("textures/common",()=>{e.load("textures/common/BigWinEffect",cc.SpriteAtlas,(i,n)=>{this.main.bigWinBackground.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("BigWinBg2_01")}),i()})})),c=g.AsyncTask(i=>a(this,void 0,void 0,function*(){e.loadDir(t,()=>{e.load([`${t}/animation/BigWinAnimation`,`${t}/animation/MegaBigWinAnimation`,`${t}/animation/SuperBigWinAnimation`,`${t}/animation/UltraBigWinAnimation`,`${t}/animation/UltraMegaBigWinAnimation`],cc.AnimationClip,(i,n)=>{if(n.length>0)for(const e of n)this.main.bigWinGraphicTextAnim.addClip(e)}),i()})}));Promise.all([o,r,s,c]).then(()=>{i()})})})})}};t([W(cc.Node)],f.prototype,"bigWinBackground",void 0),t([W(cc.Node)],f.prototype,"bigWinGroup",void 0),t([W(cc.Node)],f.prototype,"bigWinDecoration",void 0),t([W(cc.Node)],f.prototype,"bigWinLight",void 0),t([W(cc.Node)],f.prototype,"bigWinGraphicText",void 0),t([W(cc.Node)],f.prototype,"coinRainPrefab01",void 0),f=t([h],f),e.default=f,cc._RF.pop()},{"../../../../main-bundle/scripts/configs/PanelConfigs":void 0,"../../../../scripts/GlobalData":void 0,"../../../../scripts/HelperTools":void 0,"../../../../scripts/framework/gg":void 0,"../../../../scripts/manager/AudioManager":void 0,"../../../../scripts/manager/EventQueueManager":void 0,"../../../../scripts/manager/GameSystemManager":void 0,"./X500BigWinAnimEnum":"X500BigWinAnimEnum","./X500BigWinAnimModule":"X500BigWinAnimModule"}],X500CoinPrefab:[function(i,n,e){"use strict";cc._RF.push(n,"aa4e0bhdzhD8qHdutGfLrLo","X500CoinPrefab");var t=this&&this.__decorate||function(i,n,e,t){var a,o=arguments.length,r=o<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,n,e,t);else for(var s=i.length-1;s>=0;s--)(a=i[s])&&(r=(o<3?a(r):o>3?a(n,e,r):a(n,e))||r);return o>3&&r&&Object.defineProperty(n,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});const{ccclass:a,property:o}=cc._decorator;class r{static freeze(i){this.cachedFreezeUpdate=Object.assign(i.lateUpdate),i.lateUpdate=function(){}}static unfreeze(i){i.lateUpdate=this.cachedFreezeUpdate}}let s=class extends cc.Component{constructor(){super(...arguments),this.particleAnimationName="",this.main={particleSystem:null,particleAnimation:null}}onLoad(){this.cacheRainPorperty()}start(){}onEnable(){this.playSpreadAnimation()}onDisable(){this.stopSpreadAnimation()}freeze(){r.freeze(this.main.particleSystem)}unfreeze(){r.unfreeze(this.main.particleSystem)}cacheRainPorperty(){this.main.particleSystem=this.node.getComponent(cc.ParticleSystem),this.main.particleAnimation=this.node.getComponent(cc.Animation)}playSpreadAnimation(){this.particleAnimationName&&this.main.particleAnimation.play(this.particleAnimationName)}stopSpreadAnimation(){this.particleAnimationName&&this.main.particleAnimation.stop(),this.main.particleSystem.resetSystem()}};t([o],s.prototype,"particleAnimationName",void 0),s=t([a],s),e.default=s,cc._RF.pop()},{}]},{},["X500BigWinAnimEnum","X500BigWinAnimModel","X500BigWinAnimModule","X500BigWinAnimPrefab","X500CoinPrefab"]);