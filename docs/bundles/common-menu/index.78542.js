window.__require=function t(e,n,o){function i(u,s){if(!n[u]){if(!e[u]){var r=u.split("/"),c=r,l=u;if(c=c[c.length-1],r.length>1&&(window.cachePath[c]=u),!e[c]){var m="function"==typeof __require&&__require;if(!s&&m)return m(c,!0);if(a)return a(c,!0);if("object"==typeof __quick_compile_project__&&__quick_compile_project__){var d=window.cachePath[c];d&&(l=d);for(var h=l.split("/"),p="",S=h.length;S>0;)h[S]&&".."!=h[S]&&(p="/"+h[S]+p),S--;return c="./assets"+p,__quick_compile_project__.require(c,"preview-scripts/__qc_index__.js")}throw new Error("Cannot find module '"+u+"'")}u=c}var g=n[u]={exports:{}};e[u][0].call(g.exports,function(t){return i(e[u][1][t]||t)},g,g.exports,t,e,n,o)}return n[u].exports}window.cachePath={};for(var a="function"==typeof __require&&__require,u=0;u<o.length;u++)i(o[u]);return i}({CommonMenuConst:[function(t,e,n){"use strict";cc._RF.push(e,"46aafUQ0dlDQopT1xt2ecT8","CommonMenuConst"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonMenuConst=void 0,n.CommonMenuConst={MenuSetting:"menu.setting",AudioSetting:"menu.audio",ShakeSetting:"menu.shake"},cc._RF.pop()},{}],CommonMenuEnum:[function(t,e,n){"use strict";cc._RF.push(e,"36119if549CX7iHUbXVGXZZ","CommonMenuEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonShakeStatus=n.CommonAudioStatus=void 0,function(t){t[t.On=1]="On",t[t.Off=2]="Off"}(n.CommonAudioStatus||(n.CommonAudioStatus={})),function(t){t[t.On=1]="On",t[t.Off=2]="Off"}(n.CommonShakeStatus||(n.CommonShakeStatus={})),cc._RF.pop()},{}],CommonMenuModel:[function(t,e,n){"use strict";cc._RF.push(e,"efc85ZbYQlNt533Pgb7Tyva","CommonMenuModel"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonMenuSettingModel=void 0;class o{fromJSON(t){return this.audioStatus=t.audioStatus,this.shakeStatus=t.shakeStatus,this}toJSON(){let t={};return Object.assign(t,this)}toJsonString(){return JSON.stringify(this.toJSON())}}n.CommonMenuSettingModel=o,n.default=class extends o{},cc._RF.pop()},{}],CommonMenuModule:[function(t,e,n){"use strict";cc._RF.push(e,"9a9baAVSsFAgqfabozD6Gpx","CommonMenuModule");var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(n,"__esModule",{value:!0});const u=t("../../../../scripts/framework/gg"),s=t("./CommonMenuConst"),r=t("./CommonMenuEnum"),c=a(t("./CommonMenuModel"));class l{static init(){this.data=new c.default,this.initMenuSetting()}static getAudioStatus(){return this.data.audioStatus=this.menuSettingModel.audioStatus,this.data.audioStatus}static setAudioStatus(t){this.data.audioStatus=t,this.menuSettingModel.audioStatus=t,this.saveMenuSetting()}static getShakeStatus(){return this.data.shakeStatus=this.menuSettingModel.shakeStatus,this.data.shakeStatus}static setShakeStatus(t){this.data.shakeStatus=t,this.menuSettingModel.shakeStatus=t,this.saveMenuSetting()}static initMenuSetting(){const t=u.gg.storage.getItem(s.CommonMenuConst.MenuSetting);if(this.menuSettingModel=null,null==t||""==t)this.menuSettingModel=new c.CommonMenuSettingModel,this.initAndSaveMenuSetting();else try{this.menuSettingModel=(new c.CommonMenuSettingModel).fromJSON(JSON.parse(t))}catch(e){this.menuSettingModel=new c.CommonMenuSettingModel,this.initAndSaveMenuSetting()}}static initAndSaveMenuSetting(){this.menuSettingModel.audioStatus=r.CommonAudioStatus.On,this.menuSettingModel.shakeStatus=r.CommonShakeStatus.On,this.data.audioStatus=r.CommonAudioStatus.On,this.data.shakeStatus=r.CommonShakeStatus.On,this.saveMenuSetting()}static saveMenuSetting(){this.menuSettingModel&&u.gg.storage.setItem(s.CommonMenuConst.MenuSetting,this.menuSettingModel.toJsonString())}}n.default=l,l.data=null,l.menuSettingModel=null,cc._RF.pop()},{"../../../../scripts/framework/gg":void 0,"./CommonMenuConst":"CommonMenuConst","./CommonMenuEnum":"CommonMenuEnum","./CommonMenuModel":"CommonMenuModel"}],CommonMenuPrefab:[function(t,e,n){"use strict";cc._RF.push(e,"b8312scwclFr6Zj02T133+w","CommonMenuPrefab");var o=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,u=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(u=(a<3?i(u):a>3?i(e,n,u):i(e,n))||u);return a>3&&u&&Object.defineProperty(e,n,u),u},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function u(t){try{r(o.next(t))}catch(e){a(e)}}function s(t){try{r(o.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(u,s)}r((o=o.apply(t,e||[])).next())})},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const u=t("../../../../scripts/framework/gg"),s=t("../../../../scripts/HelperTools"),r=a(t("../../../../scripts/manager/AudioManager")),c=a(t("../../../../scripts/manager/GameSystemManager")),l=t("../../../../scripts/manager/LocalizeManager"),m=t("../../../../scripts/TweenEasing"),d=t("./CommonMenuEnum"),h=a(t("./CommonMenuModule")),{ccclass:p,property:S}=cc._decorator;let g=class extends cc.Component{constructor(){super(...arguments),this.btnMenu=null,this.buttonLayout=null,this.menuGroup=null,this.menuContent=null,this.logoutPopUp=null,this.labelMessage=null,this.modalDlgSpriteAtlas=null,this.btnPublicBG=null,this.displayBar=!1,this.main={btnArrow:null,btnMenu:null,btnBack:null,btnHelp:null,btnAudio:null,btnShake:null,btnLogout:null,menuGroup:null,menuContent:null,logoutPopUp:null,labelMessage:null,btnUISpriteAtlas:null,modalDlgSpriteAtlas:null,backURL:null,logoutURL:null}}onLoad(){this.cacheProperty(),this.cacheButtons(),this.setupMenuPrefab()}start(){return i(this,void 0,void 0,function*(){this.setupMenuModule(),yield this.loadMenuAssets(),this.setupLocalize(),this.initButtonUI()})}btnArrowClicked(){this.displayBar=!this.displayBar,this.playClickSoundEffect(),s.UItools.ChangeButtonSpriteFrame(this.main.btnArrow,this.btnPublicBG,{normalSprite:this.displayBar?"In":"Out"}),this.displayBar?cc.tween(this.main.menuGroup).set({position:cc.v3(980)}).to(.5,{position:cc.v3(747)},{easing:m.TweenEasing.sineOut}).start():(this.hideMenu(),cc.tween(this.main.menuGroup).set({position:cc.v3(747)}).to(.5,{position:cc.v3(980)},{easing:m.TweenEasing.sineOut}).start())}btnMenuClicked(){this.playClickSoundEffect(),this.main.menuContent.active?this.hideMenu():this.showMenu()}btnBackClicked(){this.playClickSoundEffect(),window.location.href=this.main.backURL}btnHelpClicked(){this.playClickSoundEffect(),u.gg.eventManager.emit("MenuPrefab.OnShowHelpInformation"),this.hideMenu(),c.default.getInstance().setFPS(30)}btnAudioClicked(){h.default.getAudioStatus()===d.CommonAudioStatus.On?(h.default.setAudioStatus(d.CommonAudioStatus.Off),r.default.getInstance().mute()):h.default.getAudioStatus()===d.CommonAudioStatus.Off&&(h.default.setAudioStatus(d.CommonAudioStatus.On),r.default.getInstance().unMute(),this.playClickSoundEffect()),this.updateMenuAudioButtonSprite()}btnShakeClicked(){this.playClickSoundEffect(),h.default.getShakeStatus()===d.CommonShakeStatus.On?h.default.setShakeStatus(d.CommonShakeStatus.Off):h.default.getShakeStatus()===d.CommonShakeStatus.Off&&h.default.setShakeStatus(d.CommonShakeStatus.On),this.updateMenuShakeButtonSprite()}btnLogoutClicked(){this.playClickSoundEffect(),this.main.logoutPopUp.active=!0,this.btnMenuClicked(),u.gg.eventManager.emit("PopoutPanel.OnShow",{showing:!0}),this.node.dispatchEvent(new cc.Event.EventCustom("PopoutPanel.OnShow",!0))}btnLogoutPopUpYes(){this.playClickSoundEffect(),u.gg.eventManager.onOnce("GamePanelPrefab.OnSuccessLogout",()=>{window.location.href=this.main.logoutURL}),u.gg.eventManager.emit("GamePanelPrefab.OnLogoutGame")}btnLogoutPopUpNo(){this.playClickSoundEffect(),this.main.logoutPopUp.active=!1,u.gg.eventManager.emit("PopoutPanel.OnShow",{showing:!1}),this.node.dispatchEvent(new cc.Event.EventCustom("PopoutPanel.OnHide",!0))}showMenu(){this.registerEvent(),this.showMenuContent()}hideMenu(){return i(this,void 0,void 0,function*(){this.removeEvent(),yield this.hideMenuContent()})}showMenuContent(){this.main.menuContent.active=!0,cc.tween(this.main.menuContent).set({position:cc.v3(-9)}).to(.5,{position:cc.v3(-185)},{easing:m.TweenEasing.sineOut}).start()}hideMenuContent(){return i(this,void 0,void 0,function*(){yield s.AsyncTask(t=>i(this,void 0,void 0,function*(){cc.tween(this.main.menuContent).to(.5,{position:cc.v3(-9)},{easing:m.TweenEasing.sineIn}).call(()=>{this.main.menuContent.active=!1,t()}).start()}))})}setupLocalize(){this.main.labelMessage.string=l.LocalizeText.Logout.ComfirmExitGame}registerEvent(){u.gg.eventManager.on("SlotEnginePrefab.OnSpinStarted",this.onSpinStarted,this),u.gg.eventManager.on("SlotEnginePrefab.OnSpinStartedByReel",this.onSpinStarteByReel,this)}removeEvent(){u.gg.eventManager.off("SlotEnginePrefab.OnSpinStarted",this.onSpinStarted,this),u.gg.eventManager.off("SlotEnginePrefab.OnSpinStartedByReel",this.onSpinStarteByReel,this)}setupMenuModule(){h.default.init(),this.initArrowButton(),this.main.menuContent.active=!1}initArrowButton(){this.displayBar=!1,this.main.btnArrow.target.getComponent(cc.Sprite).spriteFrame=this.btnPublicBG.getSpriteFrame("Out"),this.menuGroup.setPosition(980,0)}initButtonUI(){h.default.getAudioStatus()===d.CommonAudioStatus.Off&&r.default.getInstance().mute(),this.updateMenuAudioButtonSprite()}cacheProperty(){this.main.menuContent=this.menuContent,this.main.menuGroup=this.menuGroup,this.main.logoutPopUp=this.logoutPopUp,this.main.labelMessage=this.labelMessage,this.main.modalDlgSpriteAtlas=this.modalDlgSpriteAtlas}cacheButtons(){this.main.btnArrow=cc.find("BtnArrow",this.menuGroup).getComponent(cc.Button),this.main.btnMenu=cc.find("BtnMenu",this.menuGroup).getComponent(cc.Button),this.main.btnBack=cc.find("BtnBack",this.menuGroup).getComponent(cc.Button),this.main.btnHelp=cc.find("BtnHelp",this.buttonLayout).getComponent(cc.Button),this.main.btnAudio=cc.find("BtnAudio",this.buttonLayout).getComponent(cc.Button),this.main.btnShake=cc.find("BtnShake",this.buttonLayout).getComponent(cc.Button),this.main.btnLogout=cc.find("BtnLogout",this.buttonLayout).getComponent(cc.Button)}setupMenuPrefab(){const t=c.default.getInstance().getConfig();this.main.backURL=t.backURL,this.main.logoutURL=t.logoutURL;for(const e of t.menuConfig.buttons)if(!e.active)switch(e.name){case"btnBack":this.main.btnBack.node.active=!1;break;case"btnHelp":this.main.btnHelp.node.active=!1;break;case"btnAudio":this.main.btnAudio.node.active=!1;break;case"btnShake":this.main.btnShake.node.active=!1;break;case"btnLogout":this.main.btnLogout.node.active=!1}}playClickSoundEffect(){r.default.getInstance().play("Sfx_ButtonClicks")}onSpinStarted(){this.hideMenu()}onSpinStarteByReel(){this.hideMenu()}loadMenuAssets(){return i(this,void 0,void 0,function*(){return new Promise(t=>{cc.assetManager.loadBundle("common-menu",(e,n)=>{if(e)return console.error(e);const o=c.default.getInstance().getLanguageCode(),a=`textures/${o}`,u=s.AsyncTask(t=>i(this,void 0,void 0,function*(){n.load(`${a}/backButton/BtnPublic`,cc.SpriteAtlas,(t,e)=>{this.updateMenuBackButtonSprite(e)}),n.load(`${a}/BtnPublic`,cc.SpriteAtlas,(e,n)=>{this.updateMenuContentSprite(n);const o=c.default.getInstance().getConfig();let i=0;for(const t of o.menuConfig.buttons)"btnBack"!=t.name&&t.active&&i++;let a=3==i?2:4==i?3:4;cc.find("SafeArea/MenuGroup/MenuContent/Background",this.node).getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("GameMenuBG"+a),3===a&&(this.buttonLayout.getComponent(cc.Layout).paddingTop=13,this.buttonLayout.getComponent(cc.Layout).spacingY=10),t()}),this.assignLogoutAsset(o)}));Promise.all([u]).then(()=>{t()})})})})}updateMenuBackButtonSprite(t){s.UItools.ChangeButtonSpriteFrame(this.main.btnBack,t,{normalSprite:"Back_01",pressedSprite:"Back_02"})}updateMenuAudioButtonSprite(){const t=h.default.getAudioStatus()===d.CommonAudioStatus.On,e=t?"MenuSoundOn1":"MenuSoundOff1",n=t?"MenuSoundOn2":"MenuSoundOff2";s.UItools.ChangeButtonSpriteFrame(this.main.btnAudio,this.main.btnUISpriteAtlas,{normalSprite:e,pressedSprite:n})}updateMenuShakeButtonSprite(){const t=h.default.getShakeStatus()===d.CommonShakeStatus.On,e=t?"ShakeOn1":"ShakeOff1",n=t?"ShakeOn2":"ShakeOff2";s.UItools.ChangeButtonSpriteFrame(this.main.btnShake,this.main.btnUISpriteAtlas,{normalSprite:e,pressedSprite:n})}updateMenuContentSprite(t){this.main.btnUISpriteAtlas=t,this.updateMenuAudioButtonSprite(),this.updateMenuShakeButtonSprite(),s.UItools.ChangeButtonSpriteFrame(this.main.btnHelp,t,{normalSprite:"MenuHelp1",pressedSprite:"MenuHelp2"}),s.UItools.ChangeButtonSpriteFrame(this.main.btnShake,t,{normalSprite:"ShakeOff1",pressedSprite:"ShakeOff2"}),s.UItools.ChangeButtonSpriteFrame(this.main.btnLogout,t,{normalSprite:"MenuExit1",pressedSprite:"MenuExi2"})}assignLogoutAsset(t){const e=cc.find("SafeArea/LogoutPopUp/Content/BtnYes",this.node),n=cc.find("SafeArea/LogoutPopUp/Content/BtnNo",this.node);let o="";switch(t){case"th":o="Thai";break;case"zh":o="CN";break;default:o="EN"}s.UItools.ChangeButtonSpriteFrame(e.getComponent(cc.Button),this.main.modalDlgSpriteAtlas,{normalSprite:"Yes"+o+"0",pressedSprite:"Yes"+o+"1"}),s.UItools.ChangeButtonSpriteFrame(n.getComponent(cc.Button),this.main.modalDlgSpriteAtlas,{normalSprite:"No"+o+"0",pressedSprite:"No"+o+"1"})}changeMenuSprite(t,e){this.updateMenuBackButtonSprite(t),this.updateMenuContentSprite(e)}};o([S(cc.Button)],g.prototype,"btnMenu",void 0),o([S(cc.Node)],g.prototype,"buttonLayout",void 0),o([S(cc.Node)],g.prototype,"menuGroup",void 0),o([S(cc.Node)],g.prototype,"menuContent",void 0),o([S(cc.Node)],g.prototype,"logoutPopUp",void 0),o([S(cc.Label)],g.prototype,"labelMessage",void 0),o([S(cc.SpriteAtlas)],g.prototype,"modalDlgSpriteAtlas",void 0),o([S(cc.SpriteAtlas)],g.prototype,"btnPublicBG",void 0),g=o([p],g),n.default=g,cc._RF.pop()},{"../../../../scripts/HelperTools":void 0,"../../../../scripts/TweenEasing":void 0,"../../../../scripts/framework/gg":void 0,"../../../../scripts/manager/AudioManager":void 0,"../../../../scripts/manager/GameSystemManager":void 0,"../../../../scripts/manager/LocalizeManager":void 0,"./CommonMenuEnum":"CommonMenuEnum","./CommonMenuModule":"CommonMenuModule"}]},{},["CommonMenuConst","CommonMenuEnum","CommonMenuModel","CommonMenuModule","CommonMenuPrefab"]);