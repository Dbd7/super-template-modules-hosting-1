window.__require=function e(t,l,a){function n(o,i){if(!l[o]){if(!t[o]){var s=o.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!i&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+o+"'")}o=s}var u=l[o]={exports:{}};t[o][0].call(u.exports,function(e){return n(t[o][1][e]||e)},u,u.exports,e,t,l,a)}return l[o].exports}for(var r="function"==typeof __require&&__require,o=0;o<a.length;o++)n(a[o]);return n}({DollarBallPanelConst:[function(e,t,l){"use strict";cc._RF.push(t,"a7957OE7jpJ0Y0GFJcVTGgt","DollarBallPanelConst"),Object.defineProperty(l,"__esModule",{value:!0}),l.DollarBallPanelConst=void 0,l.DollarBallPanelConst={CacheKey:"game.cache"},cc._RF.pop()},{}],DollarBallPanelEnum:[function(e,t,l){"use strict";cc._RF.push(t,"b037ayOdAxIW4MhpOYfJcub","DollarBallPanelEnum"),Object.defineProperty(l,"__esModule",{value:!0}),l.JackpotType=l.Status=void 0,function(e){e[e.Active=1]="Active",e[e.Inactive=0]="Inactive"}(l.Status||(l.Status={})),function(e){e[e.Minor=1]="Minor",e[e.Random=2]="Random",e[e.Major=3]="Major"}(l.JackpotType||(l.JackpotType={})),cc._RF.pop()},{}],DollarBallPanelEvent:[function(e,t,l){"use strict";cc._RF.push(t,"ed511V5JoBPqaVy2StRR/lB","DollarBallPanelEvent"),Object.defineProperty(l,"__esModule",{value:!0}),l.DollarBallPanelEvent=void 0,function(e){e.OnResultUpdate="DollarBallPanelEvent.OnResultUpdate",e.OnUpdateResultByReelStop="DollarBallPanelEvent.OnUpdateResultByReelStop",e.OnJackpotWon="DollarBallPanelEvent.OnJackpotWon"}(l.DollarBallPanelEvent||(l.DollarBallPanelEvent={})),cc._RF.pop()},{}],DollarBallPanelModel:[function(e,t,l){"use strict";cc._RF.push(t,"62826Fu5zxPOaDldaei6MnB","DollarBallPanelModel"),Object.defineProperty(l,"__esModule",{value:!0}),l.DollarBallPanelModel=void 0;const a=e("./DollarBallPanelEnum");l.DollarBallPanelModel=class{constructor(){this.dollarBallActive=a.Status.Inactive,this.selectedNumberSpriteList=[],this.numbersForRandom=[],this.dollarBallResult=null}},cc._RF.pop()},{"./DollarBallPanelEnum":"DollarBallPanelEnum"}],DollarBallPanelModule:[function(e,t,l){"use strict";cc._RF.push(t,"e715e4dRJZNAa1xdCNb11UM","DollarBallPanelModule");var a=this&&this.__awaiter||function(e,t,l,a){return new(l||(l=Promise))(function(n,r){function o(e){try{s(a.next(e))}catch(t){r(t)}}function i(e){try{s(a.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l(function(e){e(t)})).then(o,i)}s((a=a.apply(e,t||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const n=e("../../../scripts/framework/gg"),r=e("./DollarBallPanelModel"),o=e("../../../scripts/HelperTools"),i=e("./DollarBallPanelEvent");class s extends cc.Component{static init(){this.data=new r.DollarBallPanelModel,this.data.numbersForRandom=this.generateRangeNumber(1,49)}static generateRangeNumber(e,t){const l=[];for(let a=e;a<=t;a++)l.push(a);return l}static addNumber(e,t){for(const l of this.data.selectedNumberSpriteList)if(-1===l.selectedNumber)return l.selectedNumber=Number(e),l.clickedButton=t,l}static clearNumber(){for(const e of this.data.selectedNumberSpriteList)e.selectedNumber=-1,e.numberSprite.active=!1}static createNumberSelectedSpriteList(e){const t=[];for(let l=0;l<5;l++)t.push({selectedNumber:-1,numberSprite:e.children[l],clickedButton:null});return t}static getSelectedNumberSpriteCount(){return this.data.selectedNumberSpriteList.filter(e=>e.selectedNumber>0).length}static getDollarBallPanelStatus(){return this.data.dollarBallActive}static setDollarBallPanelStatus(e){this.data.dollarBallActive=e}static get5RandomNumber(){const e=o.Shuffle(this.data.numbersForRandom);return[e[0],e[1],e[2],e[3],e[4]]}static numberIsSelected(e){for(const t of this.data.selectedNumberSpriteList)if(t.selectedNumber.toString()===e)return!0;return!1}static setDollarBallResult(e){return a(this,void 0,void 0,function*(){this.data.dollarBallResult=e;for(let e=0;e<5;e++)n.gg.eventManager.emit(i.DollarBallPanelEvent.OnUpdateResultByReelStop,e),yield o.Delay(o.GetRandomFloat(.1,.3))})}static clearDollarBallResult(){this.data.dollarBallResult=null}static getWinIndicatorIndexByResult(e){for(let t=0;t<5;t++)if(this.data.selectedNumberSpriteList[t].selectedNumber===e)return t}}l.default=s,s.data=null,cc._RF.pop()},{"../../../scripts/HelperTools":void 0,"../../../scripts/framework/gg":void 0,"./DollarBallPanelEvent":"DollarBallPanelEvent","./DollarBallPanelModel":"DollarBallPanelModel"}],DollarBallPanelPrefab:[function(e,t,l){"use strict";cc._RF.push(t,"b126e6LjUhBkImiftFj3119","DollarBallPanelPrefab");var a=this&&this.__createBinding||(Object.create?function(e,t,l,a){void 0===a&&(a=l),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[l]}})}:function(e,t,l,a){void 0===a&&(a=l),e[a]=t[l]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__decorate||function(e,t,l,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,l):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,l,a);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(r<3?n(o):r>3?n(t,l,o):n(t,l))||o);return r>3&&o&&Object.defineProperty(t,l,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)"default"!==l&&Object.prototype.hasOwnProperty.call(e,l)&&a(t,e,l);return n(t,e),t},i=this&&this.__awaiter||function(e,t,l,a){return new(l||(l=Promise))(function(n,r){function o(e){try{s(a.next(e))}catch(t){r(t)}}function i(e){try{s(a.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l(function(e){e(t)})).then(o,i)}s((a=a.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const c=e("../../../scripts/framework/gg"),u=e("../../../scripts/framework/lib/router/PanelComponent"),d=e("../../../scripts/HelperTools"),p=s(e("../../../scripts/manager/AudioManager")),h=o(e("../../../scripts/manager/CreditCoinConvertorManager")),m=s(e("../../../scripts/manager/GameSystemManager")),b=s(e("../../jackpot/scripts/JackpotPanelModule")),B=e("./DollarBallPanelEnum"),f=e("./DollarBallPanelEvent"),v=s(e("./DollarBallPanelModule")),{ccclass:S,property:P}=cc._decorator;let g=class extends u.PanelComponent{constructor(){super(...arguments),this.DollaBallGroup=null,this.numberSelectedSprite=null,this.resultsPanel=null,this.resultsPanelX=0,this.resultsPanelY=0,this.resultsPanelScaleX=1,this.resultsPanelScaleY=1,this.labelWinAmount=null,this.labelBetAmount=null,this.numberSelectionPanel=null,this.redBackgroud=null,this.blackBackgroud=null,this.btnDollaBall=null,this.btnRandom=null,this.btnActiveDollarBall=null,this.btnInActiveDollarBall=null,this.buttonClickSound=null,this.maxPickableNumber=5,this.resultSprites=[],this.resultLabels={labelBet:null,labelWin:null},this.resultsPanelPropertyCache=null}onLoad(){this.registerEvent()}start(){return i(this,void 0,void 0,function*(){yield this.loadDollarBallAssets(),this.setupDollarBallModule()})}show(e){e.onShowed()}hide(e){e.onHided()}numberButtonClicked(e,t){if(e&&p.default.getInstance().play("ClickSound"),v.default.numberIsSelected(t))return;const l=this.getClickedButton(t),a=cc.find("Background/Label",l.node);this.resetWhenNumberPickedMoreThan5(),l.normalSprite=this.redBackgroud;const n=v.default.addNumber(t,l);n.numberSprite.active=!0,n.numberSprite.getComponent(cc.Sprite).spriteFrame=a.getComponent(cc.Sprite).spriteFrame}randomPick(){p.default.getInstance().play("ClickSound"),v.default.clearNumber(),this.resetSelectedNumberUI();const e=v.default.get5RandomNumber();for(const t of e)this.numberButtonClicked(null,t.toString())}startDollarBallGame(){p.default.getInstance().play("ClickSound"),v.default.getSelectedNumberSpriteCount()<this.maxPickableNumber||(v.default.setDollarBallPanelStatus(B.Status.Active),this.numberSelectionPanel.node.active=!1,this.changeDollaBallIntoLiteMode())}activeDollarBallPanel(){this.btnActiveDollarBall.node.active=!1,this.btnInActiveDollarBall.node.active=!0,this.DollaBallGroup.active=!0,this.numberSelectionPanel.node.active=!0}inActiveDollarBallPanel(){v.default.setDollarBallPanelStatus(B.Status.Inactive),this.btnActiveDollarBall.node.active=!0,this.btnInActiveDollarBall.node.active=!1,this.DollaBallGroup.active=!1,this.changeDollaBallIntoFullMode(),this.clearDollarBallResult()}registerEvent(){c.gg.eventManager.on("SlotEnginePrefab.OnSpinStarted",this.onSpinStarted,this),c.gg.eventManager.on("SlotEnginePrefab.OnSpinStartedByReel",this.onSpinStarteByReel,this),c.gg.eventManager.on("GamePanelFrefab.OnGameRoundEnded",this.onGameRoundEnded,this),c.gg.eventManager.on(f.DollarBallPanelEvent.OnUpdateResultByReelStop,this.onUpdateResultByReelStop,this)}setDummyResult(){return i(this,void 0,void 0,function*(){this.clearDollarBallResult(),yield d.Delay(.5),v.default.setDollarBallResult({results:v.default.get5RandomNumber(),winAmount:d.GetRandomInterger(0,3),jackpotType:0,jackpotAmount:0})})}triggerJackpot(){return i(this,void 0,void 0,function*(){this.clearDollarBallResult(),yield d.Delay(.5),v.default.setDollarBallResult({results:v.default.get5RandomNumber(),winAmount:d.GetRandomInterger(0,3),jackpotType:B.JackpotType.Random,jackpotAmount:200})})}setupDollarBallModule(){v.default.init(),v.default.data.selectedNumberSpriteList=this.getNumberSelectedSprite(),this.resultsPanelPropertyCache={x:this.resultsPanel.node.x,y:this.resultsPanel.node.y,scaleX:this.resultsPanel.node.scaleX,scaleY:this.resultsPanel.node.scaleY},this.addResultSpritesCache(),this.addResultLabelsCache(),this.addLabelForCreditCoinUpdate()}onSpinStarted(){this.hideDollarBall()}onSpinStarteByReel(){this.hideDollarBall()}onGameRoundEnded(e){e.haveAutoSpin||this.enableBtnActiveDollarBall()}hideDollarBall(){this.disableBtnActiveDollarBall(),v.default.getDollarBallPanelStatus()===B.Status.Inactive&&this.inActiveDollarBallPanel()}enableBtnActiveDollarBall(){this.btnActiveDollarBall.interactable=!0,this.btnInActiveDollarBall.interactable=!0}disableBtnActiveDollarBall(){this.btnActiveDollarBall.interactable=!1,this.btnInActiveDollarBall.interactable=!1}onUpdateResultByReelStop(e){return i(this,void 0,void 0,function*(){const t=v.default.data.dollarBallResult;if(t){const l=t.results[e],a=this.resultSprites[e];a.dollarBallAnim.play(),a.numberSprite.string=l.toString();const n=v.default.getWinIndicatorIndexByResult(l);if(n&&(this.resultSprites[n].winIndicator.active=!0),4===e){yield d.Delay(.2);const e=t.winAmount;this.labelWinAmount.string=0===e?"0":h.CCConvertor(e.toFixed(2)),this.resultLabels.labelBet.active=!1,this.resultLabels.labelWin.active=!0,t.jackpotAmount>0&&b.default.setJackpoWonResult({jackpotType:t.jackpotType,amount:t.jackpotAmount})}}})}clearDollarBallResult(){v.default.clearDollarBallResult(),this.resultLabels.labelBet.active=!0,this.resultLabels.labelWin.active=!1;for(let e=0;e<5;e++){const t=this.resultSprites[e];t.dollarBallAnim.node.getComponent(cc.Sprite).spriteFrame=null,t.numberSprite.string="",t.winIndicator.active=!1}}changeDollaBallIntoLiteMode(){this.resultsPanel.node.x=this.resultsPanelX,this.resultsPanel.node.y=this.resultsPanelY,this.resultsPanel.node.scaleX=this.resultsPanelScaleX,this.resultsPanel.node.scaleY=this.resultsPanelScaleY}changeDollaBallIntoFullMode(){const e=this.resultsPanelPropertyCache;this.resultsPanel.node.x=e.x,this.resultsPanel.node.y=e.y,this.resultsPanel.node.scaleX=e.scaleX,this.resultsPanel.node.scaleY=e.scaleY}resetWhenNumberPickedMoreThan5(){v.default.getSelectedNumberSpriteCount()>=this.maxPickableNumber&&(v.default.clearNumber(),this.resetSelectedNumberUI())}resetSelectedNumberUI(){for(const e of v.default.data.selectedNumberSpriteList){const t=e.clickedButton;t&&(t.normalSprite=this.blackBackgroud),e.clickedButton=null}}getNumberSelectedSprite(){return v.default.createNumberSelectedSpriteList(this.numberSelectedSprite)}getClickedButton(e){return this.numberSelectionPanel.node.getChildByName("Numbers").getChildByName("Number"+e).getComponent(cc.Button)}addResultSpritesCache(){const e=cc.find("Results/Anims",this.resultsPanel.node),t=cc.find("Results/WinIndicators",this.resultsPanel.node),l=cc.find("Labels/ResultNumbers",this.resultsPanel.node);for(let a=0;a<5;a++)this.resultSprites.push({dollarBallAnim:e.children[a].getComponent(cc.Animation),winIndicator:t.children[a],numberSprite:l.children[a].getComponent(cc.Label)})}addResultLabelsCache(){const e=cc.find("Labels/LabelBet",this.resultsPanel.node),t=cc.find("Labels/LabelWin",this.resultsPanel.node);this.resultLabels.labelBet=e,this.resultLabels.labelWin=t}addLabelForCreditCoinUpdate(){h.default.getInstance().addLabelSprite(this.labelWinAmount),h.default.getInstance().addLabelSprite(this.labelBetAmount)}loadDollarBallAssets(){return i(this,void 0,void 0,function*(){return new Promise(e=>{const t=`localized-assets/modules-bundle/dollar-ball/load/${m.default.getInstance().getLanguageCode()}`,l=d.AsyncTask(e=>i(this,void 0,void 0,function*(){e()})),a=d.AsyncTask(e=>i(this,void 0,void 0,function*(){cc.resources.loadDir(t,()=>{cc.resources.load(`${t}/dollarball`,cc.SpriteAtlas,(t,l)=>{const a=l.getSpriteFrame("BtnEnable_01"),n=l.getSpriteFrame("BtnEnable_02"),r=l.getSpriteFrame("BtnEnable_03");this.btnActiveDollarBall.normalSprite=a,this.btnActiveDollarBall.pressedSprite=n,this.btnActiveDollarBall.disabledSprite=r;const o=l.getSpriteFrame("BtnDisable_01"),i=l.getSpriteFrame("BtnDisable_02"),s=l.getSpriteFrame("BtnDisable_03");this.btnInActiveDollarBall.normalSprite=o,this.btnInActiveDollarBall.pressedSprite=i,this.btnInActiveDollarBall.disabledSprite=s;const c=l.getSpriteFrame("RrndomPick_01"),u=l.getSpriteFrame("RrndomPick_02"),d=l.getSpriteFrame("bActivate_01"),p=l.getSpriteFrame("bActivate_02"),h=this.numberSelectionPanel.node.getChildByName("Buttons"),m=h.getChildByName("BtnRandom").getComponent(cc.Button),b=h.getChildByName("BtnAcivate").getComponent(cc.Button);m.normalSprite=c,m.pressedSprite=u,b.normalSprite=d,b.pressedSprite=p;const B=l.getSpriteFrame("bBet_310"),f=l.getSpriteFrame("Win0"),v=cc.find("Labels/LabelBet",this.resultsPanel.node).getComponent(cc.Sprite),S=cc.find("Labels/LabelWin",this.resultsPanel.node).getComponent(cc.Sprite);v.spriteFrame=B,S.spriteFrame=f,e()})})}));Promise.all([l,a]).then(()=>{e()}),p.default.getInstance().add("ClickSound",this.buttonClickSound),e()})})}};r([P(cc.Node)],g.prototype,"DollaBallGroup",void 0),r([P(cc.Node)],g.prototype,"numberSelectedSprite",void 0),r([P(cc.Sprite)],g.prototype,"resultsPanel",void 0),r([P()],g.prototype,"resultsPanelX",void 0),r([P()],g.prototype,"resultsPanelY",void 0),r([P()],g.prototype,"resultsPanelScaleX",void 0),r([P()],g.prototype,"resultsPanelScaleY",void 0),r([P(cc.Label)],g.prototype,"labelWinAmount",void 0),r([P(cc.Label)],g.prototype,"labelBetAmount",void 0),r([P(cc.Sprite)],g.prototype,"numberSelectionPanel",void 0),r([P(cc.SpriteFrame)],g.prototype,"redBackgroud",void 0),r([P(cc.SpriteFrame)],g.prototype,"blackBackgroud",void 0),r([P(cc.Button)],g.prototype,"btnDollaBall",void 0),r([P(cc.Button)],g.prototype,"btnRandom",void 0),r([P(cc.Button)],g.prototype,"btnActiveDollarBall",void 0),r([P(cc.Button)],g.prototype,"btnInActiveDollarBall",void 0),r([P(cc.AudioClip)],g.prototype,"buttonClickSound",void 0),g=r([S],g),l.default=g,cc._RF.pop()},{"../../../scripts/HelperTools":void 0,"../../../scripts/framework/gg":void 0,"../../../scripts/framework/lib/router/PanelComponent":void 0,"../../../scripts/manager/AudioManager":void 0,"../../../scripts/manager/CreditCoinConvertorManager":void 0,"../../../scripts/manager/GameSystemManager":void 0,"../../jackpot/scripts/JackpotPanelModule":void 0,"./DollarBallPanelEnum":"DollarBallPanelEnum","./DollarBallPanelEvent":"DollarBallPanelEvent","./DollarBallPanelModule":"DollarBallPanelModule"}]},{},["DollarBallPanelConst","DollarBallPanelEnum","DollarBallPanelEvent","DollarBallPanelModel","DollarBallPanelModule","DollarBallPanelPrefab"]);